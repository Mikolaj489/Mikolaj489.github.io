<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wynik</title>
    <link rel="stylesheet" href="assets/points/style-points.css">
</head>
<body>
    <section id="points">
        <div class="points-container">
            <h1>Wynik:</h1>
            <p id="sum"></p>
        </div>
    </section>
    <div class="id-container">Twoje ID: <span id="ID"></span></div>
    <div class="button-container">
        <a href="end.html"><span>Dowiedź się więcej</span></a>
    </div>
    <div style="text-align: center;">
        <a href="index.html"><button id="delete-cookie">Zagraj ponownie</button></a>
    </div>
    <script>
      // Funkcja do pobierania ciasteczka
function getCookie(name) {
    const cookies = document.cookie.split(';');
    for (let i = 0; i < cookies.length; i++) {
        const cookie = cookies[i].trim();
        if (cookie.startsWith(name + '=')) {
            return decodeURIComponent(cookie.split('=')[1]);
        }
    }
    return null;
}


function displayPoints() {
    const gameWon = getCookie('gameWon'); // Get the 'gameWon' cookie
    const sumElement = document.getElementById('sum');

    if (gameWon) {
        sumElement.textContent = `Liczba wygranych: ${gameWon}`; // Display the value
    } else {
        sumElement.textContent = 'Brak zapisanych wyników.'; // If the cookie doesn't exist
    }
}

// Call the function to display the points initially
displayPoints();

// Optionally, update periodically if the cookie changes
setInterval(() => {
    displayPoints();
}, 1000); // Check every second
function deleteCookie(name) {
    document.cookie = `${name}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; SameSite=None; Secure`;
}

// Obsługa kliknięcia przycisku do usunięcia ciasteczka
document.getElementById('delete-cookie').addEventListener('click', () => {
    deleteCookie('gameWon'); // Usuwamy ciasteczko 'gameWon'
    displayPoints(); // Odświeżamy widok, aby pokazać, że ciasteczko zostało usunięte
});

// Wywołanie funkcji, gdy strona się załaduje
document.addEventListener('DOMContentLoaded', () => {
    displayPoints(); // Wyświetlamy wynik z ciasteczka
});
 // Funkcja generująca losową liczbę w zakresie 1–10000
 function generateRandomNumber() {
            return Math.floor(Math.random() * 10000) + 1;
        }

        // Znajdujemy element o id="ID"
        const idElement = document.getElementById("ID");

        // Generujemy losowy numer
        const generatedID = generateRandomNumber();

        // Wstawiamy losowy numer do elementu
        idElement.textContent = generatedID;

        // Cykliczne sprawdzanie i przywracanie ID
        setInterval(() => {
            if (idElement.textContent != generatedID) {
                idElement.textContent = generatedID;
            }
        }, 100); // Sprawdzanie co 100ms
    </script>
</body>
</html>
